{% extends "base.html" %}
{% block main %}
<h1><span class="fa fa-home"></span> Overview</h1>

<ol class="breadcrumb">
    <li><a href="{{ url_for(["OverviewController", "index"])}}">Overview</a></li>
</ol>

<dl class="dl-horizontal">
    <dt>Total number of hosts:</dt>
    <dd>{{ total_count }}</dd>

    <dt>Hosts with alerts:</dt>
    <dd>{{ alert_count }}</dd>
</dl>

<h2>Latest alerts</h2>
<div class="table-responsive">
    <table class="table table-striped table-condensed table-hover">
        <thead>
            <tr>
                <th>When</th>
                <th>Host</th>
                <th>Message</th>
            </tr>
        </thead>

        <tbody>
            {% for alert in alerts %}
                <tr{% if alert.active %} class="danger"{% endif %}>
                    <td>{{ alert.timestamp|datetime("Y-m-d G:i:s") }}</td>
                    <td><a href="{{ url_for(["HostsController", "detail"], {"id": alert.server_id}) }}">{{ alert.hostname }}</a></td>
                    <td>{{ alert.getMessage() }}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="3"><div class="well">Hooray, no alerts to show.</div></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}