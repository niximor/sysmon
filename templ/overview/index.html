{% extends "base.html" %}
{% block main %}
<h1><span class="fa fa-home"></span> Overview</h1>

<ol class="breadcrumb">
    <li><a href="{{ url_for(["OverviewController", "index"])}}">Overview</a></li>
</ol>

<div class="row">
    <a href="{{ url_for(['HostsController', 'index']) }}" class="col-sm-6 box">
        <div class="panel {% if hosts.alert_count > 0 %}panel-danger{% else %}panel-success{% endif %}">
            <div class="panel-heading clearfix">
                <h3 class="panel-title"><span class="fa fa-hdd-o"></span> Hosts</h3>
            </div>
            <div class="panel-body">
                <dl class="dl-horizontal">
                    <dt>Total number of hosts:</dt>
                    <dd>{{ hosts.total_count }}</dd>

                    <dt>Hosts with alerts:</dt>
                    <dd>{{ hosts.alert_count }}</dd>
                </dl>
            </div>
        </div>
    </a>

    <a href="{{ url_for(['StampsController', 'index']) }}" class="col-sm-6 box">
        <div class="panel {% if stamps.failed > 0 %}panel-danger{% else %}panel-success{% endif %}">
            <div class="panel-heading clearfix">
                <h3 class="panel-title"><span class="fa fa-heartbeat"></span> Stamps</h3>
            </div>
            <div class="panel-body">
                <dl class="dl-horizontal">
                    <dt>Total number of stamps:</dt>
                    <dd>{{ stamps.total_count }}</dd>

                    <dt>Failed stamps:</dt>
                    <dd>{{ stamps.failed }}</dd>
                </dl>
            </div>
        </div>
    </a>
</div>

<div class="panel panel-default">
    <div class="panel-heading clearfix">
        <h2 class="panel-title">Latest alerts</h2>
    </div>
    <table class="panel-body table table-striped table-condensed table-hover">
        <thead>
            <tr>
                <th>When</th>
                <th>Host</th>
                <th>Message</th>
            </tr>
        </thead>

        <tbody>
            {% for alert in alerts %}
                <tr{% if alert.active %} class="danger"{% endif %}>
                    <td>{{ alert.timestamp|datetime("Y-m-d G:i:s") }}</td>
                    <td><a href="{{ url_for(["HostsController", "detail"], {"id": alert.server_id}) }}">{{ alert.hostname }}</a></td>
                    <td>{{ alert.getMessage() }}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="3"><div class="well">Hooray, no alerts to show.</div></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}